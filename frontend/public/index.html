<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CRUD con Node.js, Petite Vue y MySQL</title>
    <!-- Bootstrap 5.3.2 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    <!-- Petite Vue -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/petite-vue/0.2.3/petite-vue.es.js"
      integrity="sha512-FK4NKWZu3slw+XRrd7q00idnjf9ZwclilFY8rLtqcLr8GyRVQ7MtN7Jo2ExYzKvIuaRoZzeFcbeL2Rq8YUY9qg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
  </head>
  <body>
    <div id="app" class="container">
      <h2>{{ registroActual.id ? 'Editar' : 'Añadir'}} Registro</h2>
      <form
        @submit.prevent="registroActual.id ? actualizarRegistro() : crearRegistro()"
      >
        <div class="mb-3">
          <label for="nombre" class="form-label">Nombre:</label>
          <input
            type="text"
            class="form-control"
            id="nombre"
            v-model="registroActual.nombre"
            required
          />
        </div>
        <div class="mb-3">
          <label for="email" class="form-label">Correo:</label>
          <input
            type="email"
            class="form-control"
            id="email"
            v-model="registroActual.email"
            required
          />
        </div>
        <button type="submit" class="btn btn-primary">
          {{ registroActual.id ? 'Actualizar' : 'Crear' }}
        </button>
      </form>

      <h2>Lista de Registros</h2>
      <table class="table">
        <thead class="table-dark">
          <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Correo</th>
            <th>Fecha Creación</th>
            <th>Accions</th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="registro in registros" :key="registro.id">
            <td>{{ registro.id }}</td>
            <td>{{ registro.nombre }}</td>
            <td>{{ registro.email }}</td>
            <td>{{ registro.creado_en }}</td>
            <td>
              <button class="btn-btn-warning" @click="editar(registro)">
                Editar
              </button>
              <button class="btn-btn-danger" @click="eliminar(registro.id)">
                Eliminar
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <script src="app.js"></script>
  </body>
</html>
